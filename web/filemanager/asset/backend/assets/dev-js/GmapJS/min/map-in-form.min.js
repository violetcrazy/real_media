function CreateMap(){var a,t=10.770329,o=106.675039,n=0,l=0,e=1;a=new GMaps({el:"#map",lat:t,lng:o});var i=[];polygon=a.drawPolygon({paths:i,strokeColor:"#BBD8E9",strokeOpacity:1,strokeWeight:3,fillColor:"#BBD8E9",fillOpacity:.6}),GMaps.geolocate({success:function(a){console.log(a),n=a.coords.latitude,l=a.coords.longitude,e=0},error:function(a){alert("Lỗi vị trí: "+a.message)},not_supported:function(){alert("Trình duyệt của bạn không hỗ trợ lấy vị trị, vui lòng đổi trình duyệt và  thử lại sau. ")},always:function(){void 0!=$("#map").data("lng")&&void 0!=$("#map").data("lat")&&""!=$("#map").data("lat")&&""!=$("#map").data("lat")?(t=$("#map").data("lat"),o=$("#map").data("lng")):0==e&&(t=n,o=l),a.panTo({lat:t,lng:o}),a.addMarker({lat:t,lng:o,title:"",draggable:!0,icon:"assets/images/icon-location-red.png",fences:[polygon],outside:function(a){o=a.position.B,t=a.position.k,$(".lat").val(t),$(".lng").val(o)}})}}),$(".get-location").click(function(n){n.preventDefault(),GMaps.geocode({address:$(".address-input").val(),callback:function(n,l){if("OK"==l){var e=n[0].geometry.location;a.removeMarkers(),a.panTo({lat:e.k,lng:e.B}),a.addMarker({lat:e.k,lng:e.B,title:"",draggable:!0,icon:"assets/images/icon-location-red.png",fences:[polygon],outside:function(a){o=a.position.B,t=a.position.k,$(".lat").val(t),$(".lng").val(o)}}),$(".lat").val(e.k),$(".lng").val(e.B)}}})}),$(".get-my-location").click(function(){a.panTo({lat:n,lng:l}),a.addMarker({lat:n,lng:l,title:"",draggable:!0,icon:"assets/images/icon-location-red.png",fences:[polygon],outside:function(a){o=a.position.B,t=a.position.k,$(".lat").val(t),$(".lng").val(o)}}),a.setCenter(n,l),$(".lat").val(n),$(".lng").val(l)})}$(document).ready(function(){CreateMap()});